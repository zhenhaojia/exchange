# Exchange Cloud - å…¬ç›ŠäºŒæ‰‹ä¹¦äº¤æµå¹³å°

ä¸€ä¸ªåŸºäºReact + Supabaseçš„å…¬ç›Šæ€§è´¨äºŒæ‰‹ä¹¦äº¤æµå¹³å°ï¼Œé‡‡ç”¨è™šæ‹Ÿå¸ç»æµç³»ç»Ÿï¼Œè®©çŸ¥è¯†å…è´¹ä¼ é€’ï¼Œè®©é˜…è¯»æ”¹å˜ç”Ÿæ´»ã€‚

## ğŸŒŸ é¡¹ç›®ç‰¹è‰²

- **å…¬ç›Šæ€§è´¨**ï¼šæ‰€æœ‰å›¾ä¹¦å…è´¹ä½¿ç”¨è™šæ‹Ÿå¸äº¤æ¢ï¼Œé™ä½çŸ¥è¯†è·å–é—¨æ§›
- **è™šæ‹Ÿå¸ç»æµ**ï¼šå®Œå–„çš„è™šæ‹Ÿå¸è·å–å’Œæ¶ˆè´¹æœºåˆ¶
- **AIæ™ºèƒ½æ¨è**ï¼šé›†æˆè±†åŒ…AIï¼Œæä¾›ä¸ªæ€§åŒ–å›¾ä¹¦æ¨è
- **æ¯æ—¥ç­¾åˆ°**ï¼šç­¾åˆ°å¥–åŠ±å’Œé˜…è¯»æ¿€åŠ±ç³»ç»Ÿ
- **å“åº”å¼è®¾è®¡**ï¼šæ”¯æŒPCç«¯å’Œç§»åŠ¨ç«¯å®Œç¾ä½“éªŒ

## ğŸš€ åŠŸèƒ½æ¨¡å—

### ç”¨æˆ·ç³»ç»Ÿ
- âœ… ç”¨æˆ·æ³¨å†Œ/ç™»å½•
- âœ… ä¸ªäººèµ„æ–™ç®¡ç†
- âœ… ç”¨æˆ·ç­‰çº§å’Œç»éªŒç³»ç»Ÿ
- âœ… å¤´åƒä¸Šä¼ 

### è™šæ‹Ÿå¸ç³»ç»Ÿ
- âœ… æ³¨å†Œå¥–åŠ±ï¼ˆ50å¸ï¼‰
- âœ… æ¯æ—¥ç­¾åˆ°å¥–åŠ±ï¼ˆ10å¸ï¼‰
- âœ… é˜…è¯»æ¨èå¥–åŠ±ï¼ˆ5å¸ï¼‰
- âœ… å›¾ä¹¦äº¤æ¢æ¶ˆè´¹ï¼ˆ20å¸ï¼‰
- âœ… åœ¨çº¿é˜…è¯»æ¶ˆè´¹ï¼ˆ5å¸ï¼‰
- âœ… äº¤æ˜“è®°å½•ç®¡ç†

### å›¾ä¹¦ç³»ç»Ÿ
- âœ… å›¾ä¹¦å‘å¸ƒå’Œç®¡ç†
- âœ… å›¾ä¹¦æœç´¢å’Œç­›é€‰
- âœ… å›¾ä¹¦è¯¦æƒ…å±•ç¤º
- âœ… å›¾ä¹¦äº¤æ¢ç”³è¯·
- âœ… åœ¨çº¿é˜…è¯»åŠŸèƒ½

### AIæ¨èç³»ç»Ÿ
- âœ… ä¸ªæ€§åŒ–å›¾ä¹¦æ¨è
- âœ… æœç´¢åŠ©æ‰‹åŠŸèƒ½
- âœ… è¯»ä¹¦å»ºè®®æœåŠ¡
- âœ… èŠå¤©å¼äº¤äº’ç•Œé¢

### æ¯æ—¥åŠŸèƒ½
- âœ… æ¯æ—¥ç­¾åˆ°ç³»ç»Ÿ
- âœ… ç²¾é€‰å›¾ä¹¦æ¨è
- âœ… ç­¾åˆ°æ—¥å†å±•ç¤º
- âœ… è¿ç»­ç­¾åˆ°ç»Ÿè®¡

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### å‰ç«¯
- **React 18** - ç”¨æˆ·ç•Œé¢æ¡†æ¶
- **TypeScript** - ç±»å‹å®‰å…¨çš„JavaScript
- **Vite** - å¿«é€Ÿæ„å»ºå·¥å…·
- **Ant Design** - UIç»„ä»¶åº“
- **Framer Motion** - åŠ¨ç”»åº“
- **React Router** - è·¯ç”±ç®¡ç†
- **Zustand** - çŠ¶æ€ç®¡ç†

### åç«¯æœåŠ¡
- **Supabase** - æ•°æ®åº“å’Œè®¤è¯æœåŠ¡
- **è±†åŒ…AI** - æ™ºèƒ½æ¨èæœåŠ¡

### å¼€å‘å·¥å…·
- **ESLint** - ä»£ç è´¨é‡æ£€æŸ¥
- **TypeScript** - ç±»å‹æ£€æŸ¥

## ğŸ“¦ å®‰è£…éƒ¨ç½²

### ç¯å¢ƒè¦æ±‚
- Node.js >= 16.0.0
- npm >= 8.0.0

### æœ¬åœ°å¼€å‘

1. **å…‹éš†é¡¹ç›®**
```bash
git clone https://github.com/your-username/exchange-cloud.git
cd exchange-cloud
```

2. **å®‰è£…ä¾èµ–**
```bash
npm install
```

3. **é…ç½®ç¯å¢ƒå˜é‡**
```bash
cp .env.example .env
```

ç¼–è¾‘ `.env` æ–‡ä»¶ï¼Œå¡«å…¥ä»¥ä¸‹ä¿¡æ¯ï¼š
```env
# Supabase Configuration
VITE_SUPABASE_URL=your_supabase_project_url
VITE_SUPABASE_ANON_KEY=your_supabase_anon_key

# è±†åŒ…AI API Configuration
VITE_DOUBAO_API_KEY=your_doubao_api_key
VITE_DOUBAO_API_URL=https://ark.cn-beijing.volces.com/api/v3

# App Configuration
VITE_APP_NAME=Exchange Cloud - å…¬ç›ŠäºŒæ‰‹ä¹¦äº¤æµå¹³å°
VITE_APP_VERSION=1.0.0
```

4. **å¯åŠ¨å¼€å‘æœåŠ¡å™¨**
```bash
npm run dev
```

é¡¹ç›®å°†åœ¨ http://localhost:3000 å¯åŠ¨

### ç”Ÿäº§éƒ¨ç½²

1. **æ„å»ºé¡¹ç›®**
```bash
npm run build
```

2. **é¢„è§ˆæ„å»ºç»“æœ**
```bash
npm run preview
```

3. **éƒ¨ç½²åˆ°é™æ€æ‰˜ç®¡æœåŠ¡**
å°† `dist` ç›®å½•éƒ¨ç½²åˆ° Vercelã€Netlify ç­‰é™æ€æ‰˜ç®¡æœåŠ¡ã€‚

## ğŸ“Š æ•°æ®åº“é…ç½®

### Supabase æ•°æ®åº“è¡¨ç»“æ„

éœ€è¦åœ¨Supabaseä¸­åˆ›å»ºä»¥ä¸‹è¡¨ï¼š

```sql
-- ç”¨æˆ·è¡¨
CREATE TABLE users (
  id UUID PRIMARY KEY REFERENCES auth.users(id),
  email TEXT NOT NULL,
  username TEXT NOT NULL,
  avatar TEXT,
  bio TEXT,
  coins INTEGER DEFAULT 50,
  level INTEGER DEFAULT 1,
  exp INTEGER DEFAULT 0,
  daily_check_in_last TIMESTAMP,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- å›¾ä¹¦è¡¨
CREATE TABLE books (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  title TEXT NOT NULL,
  author TEXT NOT NULL,
  isbn TEXT,
  description TEXT,
  cover_image TEXT,
  category TEXT NOT NULL,
  tags TEXT[],
  owner_id UUID REFERENCES users(id) NOT NULL,
  status TEXT DEFAULT 'available',
  exchange_coins INTEGER DEFAULT 20,
  read_coins INTEGER DEFAULT 5,
  condition TEXT DEFAULT 'good',
  location TEXT,
  exchange_count INTEGER DEFAULT 0,
  created_at TIMESTAMP DEFAULT NOW(),
  updated_at TIMESTAMP DEFAULT NOW()
);

-- äº¤æ¢è®°å½•è¡¨
CREATE TABLE exchanges (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  book_id UUID REFERENCES books(id) NOT NULL,
  from_user_id UUID REFERENCES users(id) NOT NULL,
  to_user_id UUID REFERENCES users(id) NOT NULL,
  coins INTEGER NOT NULL,
  type TEXT NOT NULL,
  status TEXT DEFAULT 'pending',
  message TEXT,
  created_at TIMESTAMP DEFAULT NOW(),
  completed_at TIMESTAMP
);

-- è™šæ‹Ÿå¸äº¤æ˜“è¡¨
CREATE TABLE coin_transactions (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  user_id UUID REFERENCES users(id) NOT NULL,
  amount INTEGER NOT NULL,
  type TEXT NOT NULL,
  source TEXT NOT NULL,
  description TEXT NOT NULL,
  created_at TIMESTAMP DEFAULT NOW()
);

-- æ¯æ—¥æ¨èè¡¨
CREATE TABLE daily_recommendations (
  id UUID DEFAULT gen_random_uuid() PRIMARY KEY,
  book_id UUID REFERENCES books(id) NOT NULL,
  recommend_reason TEXT NOT NULL,
  bonus_coins INTEGER DEFAULT 5,
  is_read BOOLEAN DEFAULT FALSE,
  date DATE NOT NULL,
  created_at TIMESTAMP DEFAULT NOW()
);

-- åˆ›å»ºç´¢å¼•
CREATE INDEX idx_books_owner_id ON books(owner_id);
CREATE INDEX idx_books_status ON books(status);
CREATE INDEX idx_books_category ON books(category);
CREATE INDEX idx_exchanges_from_user ON exchanges(from_user_id);
CREATE INDEX idx_exchanges_to_user ON exchanges(to_user_id);
CREATE INDEX idx_coin_transactions_user ON coin_transactions(user_id);
CREATE INDEX idx_daily_recommendations_date ON daily_recommendations(date);

-- åˆ›å»ºå­˜å‚¨è¿‡ç¨‹
CREATE OR REPLACE FUNCTION add_user_coins(user_id UUID, amount INTEGER)
RETURNS VOID AS $$
BEGIN
  UPDATE users SET coins = coins + amount, updated_at = NOW() WHERE id = user_id;
END;
$$ LANGUAGE plpgsql;

CREATE OR REPLACE FUNCTION deduct_user_coins(user_id UUID, amount INTEGER)
RETURNS VOID AS $$
BEGIN
  UPDATE users SET coins = coins - amount, updated_at = NOW() 
  WHERE id = user_id AND coins >= amount;
END;
$$ LANGUAGE plpgsql;
```

### è¡Œçº§å®‰å…¨ç­–ç•¥

```sql
-- ç”¨æˆ·è¡¨RLSç­–ç•¥
ALTER TABLE users ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Users can view own profile" ON users
  FOR SELECT USING (auth.uid() = id);

CREATE POLICY "Users can update own profile" ON users
  FOR UPDATE USING (auth.uid() = id);

-- å›¾ä¹¦è¡¨RLSç­–ç•¥
ALTER TABLE books ENABLE ROW LEVEL SECURITY;

CREATE POLICY "Anyone can view available books" ON books
  FOR SELECT USING (status = 'available');

CREATE POLICY "Users can manage own books" ON books
  FOR ALL USING (auth.uid() = owner_id);

-- å…¶ä»–è¡¨çš„RLSç­–ç•¥...
```

## ğŸ¯ é¡¹ç›®ç»“æ„

```
exchange-cloud/
â”œâ”€â”€ public/                 # é™æ€èµ„æº
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/         # å…¬å…±ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Navbar.tsx      # å¯¼èˆªæ 
â”‚   â”‚   â”œâ”€â”€ Footer.tsx      # é¡µè„š
â”‚   â”‚   â””â”€â”€ ProtectedRoute.tsx # è·¯ç”±ä¿æŠ¤
â”‚   â”œâ”€â”€ pages/              # é¡µé¢ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ Home.tsx        # é¦–é¡µ
â”‚   â”‚   â”œâ”€â”€ Login.tsx       # ç™»å½•é¡µ
â”‚   â”‚   â”œâ”€â”€ Register.tsx    # æ³¨å†Œé¡µ
â”‚   â”‚   â”œâ”€â”€ BookList.tsx    # å›¾ä¹¦åˆ—è¡¨
â”‚   â”‚   â”œâ”€â”€ BookDetail.tsx  # å›¾ä¹¦è¯¦æƒ…
â”‚   â”‚   â”œâ”€â”€ Profile.tsx     # ä¸ªäººä¸­å¿ƒ
â”‚   â”‚   â”œâ”€â”€ DailyCheckIn.tsx # æ¯æ—¥ç­¾åˆ°
â”‚   â”‚   â”œâ”€â”€ AIRecommend.tsx # AIæ¨è
â”‚   â”‚   â””â”€â”€ CoinCenter.tsx  # è™šæ‹Ÿå¸ä¸­å¿ƒ
â”‚   â”œâ”€â”€ services/           # æœåŠ¡å±‚
â”‚   â”‚   â”œâ”€â”€ auth.ts         # è®¤è¯æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ books.ts        # å›¾ä¹¦æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ coins.ts        # è™šæ‹Ÿå¸æœåŠ¡
â”‚   â”‚   â”œâ”€â”€ doubao.ts       # AIæœåŠ¡
â”‚   â”‚   â””â”€â”€ supabase.ts     # æ•°æ®åº“æœåŠ¡
â”‚   â”œâ”€â”€ stores/             # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ authStore.ts    # è®¤è¯çŠ¶æ€
â”‚   â”‚   â””â”€â”€ coinStore.ts    # è™šæ‹Ÿå¸çŠ¶æ€
â”‚   â”œâ”€â”€ types/              # ç±»å‹å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ constants/          # å¸¸é‡å®šä¹‰
â”‚   â”‚   â””â”€â”€ index.ts
â”‚   â”œâ”€â”€ utils/              # å·¥å…·å‡½æ•°
â”‚   â”‚   â””â”€â”€ helpers.ts
â”‚   â”œâ”€â”€ App.tsx             # ä¸»åº”ç”¨ç»„ä»¶
â”‚   â”œâ”€â”€ main.tsx            # å…¥å£æ–‡ä»¶
â”‚   â””â”€â”€ index.css           # å…¨å±€æ ·å¼
â”œâ”€â”€ package.json            # é¡¹ç›®é…ç½®
â”œâ”€â”€ vite.config.ts          # Viteé…ç½®
â”œâ”€â”€ tsconfig.json           # TypeScripté…ç½®
â””â”€â”€ README.md               # é¡¹ç›®è¯´æ˜
```

## ğŸ”§ å¼€å‘æŒ‡å—

### ä»£ç è§„èŒƒ

é¡¹ç›®ä½¿ç”¨ESLintè¿›è¡Œä»£ç è´¨é‡æ£€æŸ¥ï¼Œæäº¤å‰è¯·ç¡®ä¿ï¼š
```bash
npm run lint
```

### ç±»å‹æ£€æŸ¥

```bash
npm run type-check
```

### æ„å»ºæµ‹è¯•

```bash
npm run build
```

## ğŸŒ APIæ–‡æ¡£

### Supabase API
- **è®¤è¯**: `/auth/v1/`
- **æ•°æ®åº“**: `/rest/v1/`
- **å­˜å‚¨**: `/storage/v1/`

### è±†åŒ…AI API
- **èŠå¤©å®Œæˆ**: `/chat/completions`
- **æ¨¡å‹**: ep-20241205142441-7v72r

## ğŸ¤ è´¡çŒ®æŒ‡å—

1. Fork æœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. æ‰“å¼€ Pull Request

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…

## ğŸ™ è‡´è°¢

- [React](https://reactjs.org/) - ç”¨æˆ·ç•Œé¢æ¡†æ¶
- [Supabase](https://supabase.com/) - åç«¯å³æœåŠ¡å¹³å°
- [Ant Design](https://ant.design/) - UIç»„ä»¶åº“
- [è±†åŒ…AI](https://www.doubao.com/) - AIæ¨èæœåŠ¡

## ğŸ“ è”ç³»æˆ‘ä»¬

- é¡¹ç›®ä¸»é¡µ: [GitHub Repository](https://github.com/your-username/exchange-cloud)
- é—®é¢˜åé¦ˆ: [Issues](https://github.com/your-username/exchange-cloud/issues)
- é‚®ç®±: your-email@example.com

---

**Exchange Cloud** - è®©çŸ¥è¯†ä¼ é€’æ¸©æš–ï¼Œè®©é˜…è¯»æ”¹å˜ç”Ÿæ´» â¤ï¸