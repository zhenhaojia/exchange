# äºŒæ‰‹ä¹¦äº¤æ˜“ç³»ç»Ÿæ•°æ®åº“è®¾ç½®æŒ‡å—

## ğŸ“‹ æ¦‚è¿°

æœ¬é¡¹ç›®ä½¿ç”¨MySQLæ•°æ®åº“å­˜å‚¨ç”¨æˆ·æ•°æ®ã€å›¾ä¹¦ä¿¡æ¯ã€è®¢å•è®°å½•ç­‰ã€‚ä»¥ä¸‹æ˜¯å®Œæ•´çš„æ•°æ®åº“è®¾ç½®å’Œåˆå§‹åŒ–æŒ‡å—ã€‚

## ğŸ—„ï¸ æ•°æ®åº“ç»“æ„

### ä¸»è¦æ•°æ®è¡¨

1. **users** - ç”¨æˆ·ä¿¡æ¯è¡¨
2. **categories** - å›¾ä¹¦åˆ†ç±»è¡¨  
3. **books** - å›¾ä¹¦ä¿¡æ¯è¡¨
4. **cart_items** - è´­ç‰©è½¦è¡¨
5. **orders** - è®¢å•è¡¨
6. **favorites** - æ”¶è—è¡¨
7. **reviews** - è¯„ä»·è¡¨
8. **messages** - æ¶ˆæ¯è¡¨
9. **notifications** - ç³»ç»Ÿé€šçŸ¥è¡¨
10. **addresses** - åœ°å€è¡¨
11. **payments** - æ”¯ä»˜è®°å½•è¡¨

## ğŸš€ å¿«é€Ÿå¼€å§‹

### å‰ææ¡ä»¶

1. ç¡®ä¿å·²å®‰è£…MySQLæ•°æ®åº“ï¼ˆå»ºè®®ç‰ˆæœ¬5.7+ï¼‰
2. MySQLæœåŠ¡å·²å¯åŠ¨
3. ç¡®ä¿rootç”¨æˆ·æœ‰è¶³å¤Ÿçš„æƒé™

### æ–¹æ³•ä¸€ï¼šè‡ªåŠ¨åˆå§‹åŒ–ï¼ˆæ¨èï¼‰

```bash
# è¿›å…¥é¡¹ç›®ç›®å½•
cd d:/æ¡Œé¢/exchange

# ä¸€æ­¥åˆ°ä½ï¼šåˆå§‹åŒ–æ•°æ®åº“å¹¶å¯åŠ¨å‰åç«¯
npm run setup
```

### æ–¹æ³•äºŒï¼šåˆ†æ­¥æ‰§è¡Œ

#### 1. åˆå§‹åŒ–æ•°æ®åº“
```bash
npm run init-db
```

#### 2. å¯åŠ¨åç«¯æœåŠ¡å™¨
```bash
npm run server
```

#### 3. å¯åŠ¨å‰ç«¯å¼€å‘æœåŠ¡å™¨
```bash
npm run dev
```

### æ–¹æ³•ä¸‰ï¼šæ‰‹åŠ¨æ‰§è¡Œ

#### 1. è¿æ¥MySQL
```bash
mysql -u root -p
```

#### 2. æ‰§è¡Œæ•°æ®åº“è„šæœ¬
```sql
source database.sql;
```

#### 3. æ’å…¥æ¨¡æ‹Ÿæ•°æ®
```bash
# åœ¨æ–°ç»ˆç«¯çª—å£ä¸­æ‰§è¡Œ
node insert_mock_data.js
```

## ğŸ“Š æµ‹è¯•æ•°æ®

ç³»ç»Ÿä¼šè‡ªåŠ¨åˆ›å»ºä»¥ä¸‹æµ‹è¯•æ•°æ®ï¼š

### ç”¨æˆ·è´¦å·
| ç”¨æˆ·å | é‚®ç®± | å¯†ç  | è¯´æ˜ |
|--------|------|------|------|
| å¼ ä¸‰ | zhangsan@example.com | 123456 | æ™®é€šç”¨æˆ· |
| æå›› | lisi@example.com | 123456 | æ™®é€šç”¨æˆ· |
| ç‹äº” | wangwu@example.com | 123456 | æ™®é€šç”¨æˆ· |
| èµµå…­ | zhaoliu@example.com | 123456 | æ™®é€šç”¨æˆ· |
| é’±ä¸ƒ | qianqi@example.com | 123456 | æ™®é€šç”¨æˆ· |

### å›¾ä¹¦æ•°æ®
- 10æœ¬ä¸åŒç±»åˆ«çš„äºŒæ‰‹å›¾ä¹¦
- æ¶µç›–è®¡ç®—æœºã€æ–‡å­¦ã€æ•™æã€è‰ºæœ¯è®¾è®¡ç­‰åˆ†ç±»
- æ¯æœ¬ä¹¦éƒ½æœ‰å®Œæ•´çš„ä¿¡æ¯å’Œå›¾ç‰‡

### å…¶ä»–æ•°æ®
- éšæœºç”Ÿæˆçš„è´­ç‰©è½¦æ•°æ®
- æ¨¡æ‹Ÿè®¢å•ï¼ˆåŒ…å«ä¸åŒçŠ¶æ€ï¼‰
- ç”¨æˆ·è¯„ä»·æ•°æ®

## ğŸ”§ APIæ¥å£

åç«¯æœåŠ¡å™¨è¿è¡Œåœ¨ `http://localhost:3001`

### ä¸»è¦æ¥å£

#### ç”¨æˆ·è®¤è¯
- `POST /api/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/login` - ç”¨æˆ·ç™»å½•
- `GET /api/user/profile` - è·å–ç”¨æˆ·ä¿¡æ¯

#### å›¾ä¹¦ç›¸å…³
- `GET /api/books` - è·å–å›¾ä¹¦åˆ—è¡¨
- `GET /api/books/:id` - è·å–å›¾ä¹¦è¯¦æƒ…
- `POST /api/books` - å‘å¸ƒå›¾ä¹¦
- `GET /api/categories` - è·å–åˆ†ç±»åˆ—è¡¨

#### è´­ç‰©è½¦
- `POST /api/cart` - æ·»åŠ åˆ°è´­ç‰©è½¦
- `GET /api/cart` - è·å–è´­ç‰©è½¦åˆ—è¡¨

#### è®¢å•ç®¡ç†
- `POST /api/orders` - åˆ›å»ºè®¢å•
- `GET /api/orders` - è·å–è®¢å•åˆ—è¡¨

## ğŸŒ è®¿é—®åœ°å€

- **å‰ç«¯åœ°å€**: http://localhost:5175
- **åç«¯API**: http://localhost:3001/api

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### 1. æ•°æ®åº“è¿æ¥å¤±è´¥
```
é”™è¯¯: ER_ACCESS_DENIED_ERROR: Access denied for user 'root'@'localhost'
```
**è§£å†³æ–¹æ¡ˆ**: 
- æ£€æŸ¥MySQLæœåŠ¡æ˜¯å¦å¯åŠ¨
- ç¡®è®¤rootç”¨æˆ·å¯†ç æ˜¯å¦æ­£ç¡®
- ä¿®æ”¹ `server.js` ä¸­çš„æ•°æ®åº“è¿æ¥é…ç½®

#### 2. ç«¯å£è¢«å ç”¨
```
é”™è¯¯: listen EADDRINUSE :::3001
```
**è§£å†³æ–¹æ¡ˆ**:
- ä¿®æ”¹ `server.js` ä¸­çš„ç«¯å£å·
- æˆ–ç»ˆæ­¢å ç”¨ç«¯å£çš„è¿›ç¨‹

#### 3. SQLæ‰§è¡Œå¤±è´¥
**è§£å†³æ–¹æ¡ˆ**:
- æ£€æŸ¥MySQLç‰ˆæœ¬å…¼å®¹æ€§
- ç¡®ä¿æœ‰è¶³å¤Ÿçš„æ•°æ®åº“æƒé™
- æ‰‹åŠ¨æ‰§è¡ŒSQLæ–‡ä»¶

### è°ƒè¯•å‘½ä»¤

```bash
# æ£€æŸ¥MySQLæœåŠ¡çŠ¶æ€
net start mysql

# æŸ¥çœ‹MySQLè¿›ç¨‹
tasklist | findstr mysql

# æµ‹è¯•æ•°æ®åº“è¿æ¥
mysql -u root -p -e "SHOW DATABASES;"
```

## ğŸ“ å¼€å‘æ³¨æ„äº‹é¡¹

1. **æ•°æ®åº“é…ç½®**: å®é™…éƒ¨ç½²æ—¶è¯·ä¿®æ”¹ `server.js` ä¸­çš„æ•°æ®åº“è¿æ¥ä¿¡æ¯
2. **å¯†ç å®‰å…¨**: ç”Ÿäº§ç¯å¢ƒè¯·ä½¿ç”¨æ›´å®‰å…¨çš„JWTå¯†é’¥
3. **æ–‡ä»¶ä¸Šä¼ **: ç¡®ä¿uploadsç›®å½•æœ‰å†™å…¥æƒé™
4. **CORSé…ç½®**: æ ¹æ®éƒ¨ç½²ç¯å¢ƒè°ƒæ•´CORSè®¾ç½®

## ğŸ”„ æ•°æ®å¤‡ä»½

### å¯¼å‡ºæ•°æ®
```bash
mysqldump -u root -p secondhand_books > backup.sql
```

### å¯¼å…¥æ•°æ®
```bash
mysql -u root -p secondhand_books < backup.sql
```

## ğŸ“ æŠ€æœ¯æ”¯æŒ

å¦‚é‡åˆ°é—®é¢˜ï¼Œè¯·æ£€æŸ¥ï¼š
1. æ§åˆ¶å°è¾“å‡ºçš„é”™è¯¯ä¿¡æ¯
2. ç½‘ç»œè¿æ¥çŠ¶æ€
3. æ•°æ®åº“æœåŠ¡çŠ¶æ€
4. æ–‡ä»¶æƒé™è®¾ç½®

---

**è®¾ç½®å®Œæˆåï¼Œæ‚¨å°±å¯ä»¥å¼€å§‹ä½¿ç”¨å®Œæ•´çš„äºŒæ‰‹ä¹¦äº¤æ˜“ç³»ç»Ÿäº†ï¼** ğŸ‰